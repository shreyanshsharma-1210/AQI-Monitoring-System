# ============================================================
# AQI Monitoring System — Environment Variables
# Copy this file to .env and fill in your values.
# ============================================================

# ── AQI Data (Required) ─────────────────────────────────────
# Get a free token at: https://aqicn.org/api/
WAQI_API_KEY=your_waqi_token_here

# ── Geolocation (Required) ──────────────────────────────────
# Get a free token at: https://ipinfo.io/signup
IPINFO_TOKEN=your_ipinfo_token_here

# ── PostgreSQL ──────────────────────────────────────────────
# Used by FastAPI (SQLAlchemy) and the Pathway pipeline
DATABASE_URL=postgresql+asyncpg://aqi_user:secret@localhost:5432/aqi_db

# Pathway pipeline reads these individually
PGHOST=localhost          # Use "postgres" inside Docker Compose
PGPORT=5432
PGDATABASE=aqi_db
PGUSER=aqi_user
PGPASSWORD=secret

# ── Redis ───────────────────────────────────────────────────
# Used by FastAPI (pub/sub bridge) and Pathway publisher
REDIS_URL=redis://localhost:6379   # Use "redis://redis:6379" inside Docker Compose

# ── Supabase Auth (Optional — required for user auth) ───────
# Create a free project at: https://supabase.com
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# ── Pipeline Tuning (Optional) ──────────────────────────────
# How often (seconds) to poll WAQI stations. Default: 180 (3 min).
# Use 900 (15 min) for production to stay within WAQI rate limits.
AQI_POLL_INTERVAL_S=180

# ── Phase 6: Notifications ──────────────────────────────────
# Web Push (VAPID) — no Firebase account required.
# Generate your VAPID key pair once:
#   pip install pywebpush
#   python -c "from py_vapid import Vapid; v=Vapid(); v.generate_keys(); print('VAPID_PRIVATE_KEY:', v.private_key); print('VAPID_PUBLIC_KEY:', v.public_key)"
VAPID_PRIVATE_KEY=your_vapid_private_key_here
VAPID_PUBLIC_KEY=your_vapid_public_key_here

# Resend — for email digest / AQI alert emails
# Sign up at: https://resend.com (free tier: 100 emails/day)
RESEND_API_KEY=your_resend_api_key_here

# Verified sender email on Resend (must match a domain you own or use onboarding@resend.dev for tests)
EMAIL_FROM=alerts@yourdomain.com
